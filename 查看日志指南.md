# 如何查看后端日志和错误信息

## 方法1: 查看应用日志文件（推荐）

### PowerShell命令：
```powershell
# 查看最后50行日志
cd backend
Get-Content logs\app.log -Tail 50

# 查看包含ERROR的日志行
Get-Content logs\app.log | Select-String "ERROR" -Context 5

# 查看包含Agent相关的日志
Get-Content logs\app.log | Select-String "Agent|agent" -Context 3

# 实时查看日志（类似tail -f）
Get-Content logs\app.log -Wait -Tail 20
```

## 方法2: 查看Uvicorn错误日志

```powershell
# 查看Uvicorn标准错误输出
Get-Content backend\logs\uvicorn.err.log -Tail 50

# 查看Uvicorn标准输出
Get-Content backend\logs\uvicorn.out.log -Tail 50
```

## 方法3: 如果使用Docker

```powershell
# 查看后端容器日志
docker logs dataagent-backend --tail 100

# 实时查看日志
docker logs dataagent-backend -f

# 查看最近10分钟的错误
docker logs dataagent-backend --since 10m | Select-String "ERROR|Exception"
```

## 方法4: 直接查看日志文件

在文件资源管理器中打开：
- `backend\logs\app.log` - 主应用日志
- `backend\logs\uvicorn.err.log` - Uvicorn错误日志
- `backend\logs\uvicorn.out.log` - Uvicorn输出日志

## 方法5: 在代码中添加更详细的日志

如果日志不够详细，可以在Agent服务中添加更详细的异常捕获：

```python
# 在 backend/src/app/services/agent/agent_service.py 中
except Exception as e:
    import traceback
    logger.error(f"Agent execution failed: {e}")
    logger.error(f"Traceback: {traceback.format_exc()}")
```

## 方法6: 使用浏览器开发者工具

1. 打开浏览器开发者工具（F12）
2. 切换到 Network（网络）标签
3. 发送AI助手查询
4. 查看 `/api/v1/agent/query` 请求的响应
5. 查看 Response（响应）标签中的详细错误信息

## 方法7: 查看Python控制台输出

如果后端是在终端中直接运行的，错误信息会直接显示在控制台中。

## 快速诊断命令

```powershell
# 一键查看最近的错误
cd backend
Get-Content logs\app.log -Tail 100 | Select-String -Pattern "ERROR|Exception|Traceback|TaskGroup" -Context 10
```













