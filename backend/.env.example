# Data Agent V4 - Backend Environment Variables Template
# 复制此文件为 .env 并填入真实值
#
# 重要安全提醒：
# 1. 绝不要将包含真实密钥的 .env 文件提交到版本控制系统
# 2. 在生产环境中使用强密码和随机密钥
# 3. 定期轮换敏感信息

# ===================================================================
# 应用基础配置
# ===================================================================
APP_NAME=Data Agent Backend
APP_VERSION=1.0.0
DEBUG=false
ENVIRONMENT=development

# 日志配置
LOG_LEVEL=INFO

# ===================================================================
# 数据库配置 (PostgreSQL)
# ===================================================================
# PostgreSQL 连接字符串
# 格式: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://postgres:password@localhost:5432/dataagent

# 数据库连接池配置
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600
DATABASE_CONNECT_TIMEOUT=10

# ===================================================================
# MinIO 对象存储配置
# ===================================================================
# MinIO 服务地址 (Docker 内部使用服务名，本地开发使用 localhost:9000)
MINIO_ENDPOINT=minio:9000

# MinIO 访问凭据 (必须修改默认值)
MINIO_ACCESS_KEY=your_strong_minio_access_key_here
MINIO_SECRET_KEY=your_strong_minio_secret_key_here_at_least_16_chars

# MinIO 存储桶配置
MINIO_BUCKET_NAME=dataagent-docs
MINIO_SECURE=false

# ===================================================================
# ChromaDB 向量数据库配置
# ===================================================================
# ChromaDB 服务地址
CHROMA_HOST=vector_db
CHROMA_PORT=8000
CHROMA_COLLECTION_NAME=knowledge_base

# ===================================================================
# 智谱 AI API 配置
# ===================================================================
# 智谱 AI API 密钥 (获取地址: https://open.bigmodel.cn/)
ZHIPUAI_API_KEY=your_zhipuai_api_key_here

# 默认使用的 GLM 模型
ZHIPUAI_DEFAULT_MODEL=glm-4

# ===================================================================
# API 服务配置
# ===================================================================
# API 版本前缀
API_V1_PREFIX=/api/v1

# API 认证密钥 (可选，如果设置则需要所有 API 调用包含此密钥)
# API_KEY=your_strong_api_key_here_if_auth_needed

# 服务器配置
HOST=0.0.0.0
PORT=8000

# CORS 允许的源
ALLOWED_HOSTS=["http://localhost:3000", "http://127.0.0.1:3000"]

# ===================================================================
# 安全配置
# ===================================================================
# JWT 配置
SECRET_KEY=your-super-secret-key-generate-a-strong-one-in-production-min-32-chars
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=1440

# 安全增强配置
# 强制安全验证 (生产环境建议设置为 true)
FORCE_SECURITY_VALIDATION=false

# 密钥轮换配置
KEY_ROTATION_ENABLED=true
KEY_ROTATION_REMINDER_DAYS=7
KEY_ROTATION_AUDIT_RETENTION_DAYS=90

# 配置审计配置
CONFIG_AUDIT_ENABLED=true
CONFIG_AUDIT_LOG_RETENTION_DAYS=30
CONFIG_AUDIT_SENSITIVE_MASKING=true

# 安全扫描配置
SECURITY_SCAN_ON_STARTUP=true
BLOCK_STARTUP_ON_SECURITY_ERROR=false

# ===================================================================
# 外部服务配置 (可选)
# ===================================================================
# Redis 缓存 (如果使用)
# REDIS_URL=redis://localhost:6379

# 邮件服务配置 (如果使用)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASSWORD=your_email_password

# ===================================================================
# 监控和追踪 (可选)
# ===================================================================
# Sentry 错误追踪
# SENTRY_DSN=your_sentry_dsn_here

# 应用性能监控
# APM_SERVER_URL=http://localhost:8200